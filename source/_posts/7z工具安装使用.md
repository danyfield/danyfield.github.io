---
title: 7z工具安装使用
date: 2023-03-10 17:14:14
tags: "linux工具"
categories: "linux"
---

### 介绍

由于windows加密算法与linux不同，导致使用`unzip`解压windows中加密的压缩文件可能报错，推荐使用`7-zip`

### 安装

`yum install p7zip -y`

可能会出现没有可用的软件包的问题

#### 解决方案

更新epel第三方软件库

> 卸载：yum remove epel-release
>
> 清空目录：rm -rf /var/cache/yum/x86_64/6/epel/
>
> 安装：yum install  epel-release

重新安装

`yum install p7zip -y `

> 注：该安装包安装完后有7za程序，支持zip格式，不支持rar等格式
>
> 若要支持其它格式则安装p7zip-full，安装完成后有7z（全功能）、7za（仅适用7zip本身）、7zr（只支持7z格式）三个程序

### 使用

`7z [adeltux] [-][SWITCH] …`

- 第一个参数[adeltux]表示执行的功能
  - `a`：创建压缩文件或向压缩文件中添加文件
  - `d`：从压缩文件里删除文件
  - `e`：解压，但不创建目录结构
  - `l`：显示压缩文件中包含的内容
  - `t`：测试压缩文件是否有效
  - `u`：更新压缩文件中的文件
  - `x`：解压，创建目录结构
- \[-][SWITCH]表示对应的选项
  - `-t`：指定压缩格式
  - `-p`：设置密码，如`-p123456`
  - `-o`：指定解压后的存放目录

最后接对应的压缩文件名(可以使用通配符，可以有多个文件)

7-zip退出后也有自己的返回值，在命令执行完成后马上执行echo $?命令查看

```
0	正常
1	警告（无错误），某些文件在压缩过程中无法读取
2	错误
7	无法识别命令行参数
8	没有足够的内存执行操作
255	用户自行按下Ctrl+C来中止程序
```