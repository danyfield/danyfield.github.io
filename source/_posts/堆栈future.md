---
title: 堆栈future
date: 2023-02-03 15:33:37
---

#### mysql事务

事务是访问和更新数据库的程序执行单元，事务中可能包含一个或多个sql语句，这些语句要么都执行要么都不执行

Start transaction标识事务开始，commit提交事务，将执行结果写入到数据库；若sql语句执行出现问题会调用rollback，回滚所有已执行成功的sql语句，也可以在事务中直接使用rollback

ACID特性：原子性、一致性、隔离性、持久性

#### Go垃圾回收机制

- 常见垃圾回收算法：引用计数（Python/php）、标记清除（golang）、分代回收（java）

- 垃圾回收原理：标记出内存中哪些对象在使用和未使用，将未使用的回收

- 内存标记：内存分配有个span数据结构，span维护了一个个内存块，由一个位图allocBits表示每个内存块分配情况，gcmarkBits标记内存块被引用（标记）情况，两者对比可以找出要回收的目标

  ![](https://s1.ax1x.com/2023/02/03/pSsyk1s.png)

- 三色标记法：将在标记队列中等待标记的对象假设为灰色，未标记的记为白色（将被清除），已标记的记为黑色

- STW即停掉所有goroutine专心做垃圾回收

